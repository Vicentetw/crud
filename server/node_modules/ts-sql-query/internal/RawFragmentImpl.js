"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.RawFragmentImpl = void 0;
const ITableOrView_1 = require("../utils/ITableOrView");
const symbols_1 = require("../utils/symbols");
class RawFragmentImpl {
    constructor(template, params) {
        this.__template = template;
        this.__params = params;
    }
    __toSql(sqlBuilder, params) {
        return sqlBuilder._rawFragment(params, this.__template, this.__params);
    }
    __toSqlForCondition(sqlBuilder, params) {
        return this.__toSql(sqlBuilder, params);
    }
    __addWiths(withs) {
        const params = this.__params;
        for (let i = 0, length = params.length; i < length; i++) {
            (0, ITableOrView_1.__addWiths)(params[i], withs);
        }
    }
    __registerTableOrView(requiredTablesOrViews) {
        const params = this.__params;
        for (let i = 0, length = params.length; i < length; i++) {
            (0, ITableOrView_1.__registerTableOrView)(params[i], requiredTablesOrViews);
        }
    }
    __registerRequiredColumn(requiredColumns, onlyForTablesOrViews) {
        const params = this.__params;
        for (let i = 0, length = params.length; i < length; i++) {
            (0, ITableOrView_1.__registerRequiredColumn)(params[i], requiredColumns, onlyForTablesOrViews);
        }
    }
    __getOldValues() {
        const params = this.__params;
        for (let i = 0, length = params.length; i < length; i++) {
            const result = (0, ITableOrView_1.__getOldValues)(params[i]);
            if (result) {
                return result;
            }
        }
        return undefined;
    }
}
exports.RawFragmentImpl = RawFragmentImpl;
